<!DOCTYPE html>
<html class="project-page">
  <head>
    <%= partial "shared/metatags" %>
    <title>Icalia Labs</title>
    <link rel="icon" href="<%= ENV["AWS_S3_BUCKET_URL"] %>/assets/img/favicon.ico">
    <%= stylesheet_link_tag :site %>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.css"/>
    <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-32608013-1', 'auto');
       ga('send', 'pageview');
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  </head>
  <body class="<%= current_page.data.type %>">

    <div class="project-container" id="project-container">
    	<header class="main-menu animated bounceInDown">
	      <a href='/'><%= partial "logo" %></a>
	      <nav class="logo-menu">
	        <a href="startups">For Startups</a>
	        <a href="enterprise">For Enterprise</a>
	      </nav>
	      <div class="burger">
	        <div class="one"></div>
	        <div class="two"></div>
	        <span class="burger-label">Menu</span>
	      </div>
	    </header>
	    <nav class="menu-overlay">
	      <div class="container">
	        <div class="menu-content">
	          <div class="menu-content-primary-menu">
	            <a class="l1 big-link" href="culture"><span class="label-menu">About</span>Culture</a>
	            <a class="l2 big-link" href="process"><span class="label-menu">Icalier way</span>Process</a>
	            <a class="l3 big-link" href="projects"><span class="label-menu">Expertise</span>Work</a>
	            <a class="l4 big-link" href="team"><span class="label-menu">Our Family</span>Team</a>
	            <a class="l5 big-link" href="contact"><span class="label-menu">Tell us abour your project</span>Contact</a>
	            <nav class="list-menu">
	              <span class="label-menu">Other pages</span>
	              <a href="#">Open Source Projects</a>
	              <a href="#">Meetups</a>
	              <a href="#">Jobs</a>
	              <a href="#">Blog</a>
	            </nav>
	            <nav class="list-menu">
	              <span class="label-menu">Get in Touch</span>
	              <a href="mailto:weare@icalialabs.com">weare@icalialabs.com</a>
	              <a href="tel:8120898857">+52 01 (81) 2089 8857</a>
	            </nav>
	          </div>
	        </div>
	      </div>
	    </nav>
      <section class="header">
				<div class="bg-img">
	        <img src="<%= current_page.data.bg_img %>" alt="<%= current_page.data.title %>" >
	      </div>
	       <div class="title">
	          <div class="project-name">
	            <h1 class="project-title"><%= current_page.data.title %></h1>

	            <div class="details">
	              <!--div class="row clearfix details">
	                <div class="col-6">
	                  <h3>Producto </h3>
	                </div>
	                <div class="col-6">
	                  <h3>Cliente </h3>
	                </div>
	              </div -->

	              <div class="row clearfix">
	                <div class="col-6">
	                  <h3 class="light"><%= current_page.data.product %></h3>
	                </div>
	                <div class="col-6">
	                  <h3 class="light"><%= current_page.data.client %></h3>
	                </div>
	              </div>
	            </div>
	          </div>

	        <p class="subline"> <%= current_page.data.subtitle %> </p>
	      </div>
	    </section>
      <button class="trigger">
        <span class="span-trigger">Trigger</span>
      </button>

      <article class="content container">
        <div>
          <%= yield %>
        </div>
      </article>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="/javascripts/application.js"></script>
    <script type="text/javascript" charset="utf-8" src="/javascripts/classie.js"></script>
    
    <script type="text/javascript" charset="utf-8" src="/javascripts/jquery.kinetic.min.js"></script>
    <script>
			(function() {

				// detect if IE : from http://stackoverflow.com/a/16657946
				var ie = (function(){
					var undef,rv = -1; // Return value assumes failure.
					var ua = window.navigator.userAgent;
					var msie = ua.indexOf('MSIE ');
					var trident = ua.indexOf('Trident/');

					if (msie > 0) {
						// IE 10 or older => return version number
						rv = parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
					} else if (trident > 0) {
						// IE 11 (or newer) => return version number
						var rvNum = ua.indexOf('rv:');
						rv = parseInt(ua.substring(rvNum + 3, ua.indexOf('.', rvNum)), 10);
					}

					return ((rv > -1) ? rv : undef);
				}());


				// disable/enable scroll (mousewheel and keys) from http://stackoverflow.com/a/4770179
				// left: 37, up: 38, right: 39, down: 40,
				// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36
				var keys = [32, 37, 38, 39, 40], wheelIter = 0;

				function preventDefault(e) {
					e = e || window.event;
					if (e.preventDefault)
					e.preventDefault();
					e.returnValue = false;
				}

				function keydown(e) {
					for (var i = keys.length; i--;) {
						if (e.keyCode === keys[i]) {
							preventDefault(e);
							return;
						}
					}
				}

				function touchmove(e) {
					preventDefault(e);
				}

				function wheel(e) {
					// for IE
					//if( ie ) {
						//preventDefault(e);
					//}
				}

				function disable_scroll() {
					window.onmousewheel = document.onmousewheel = wheel;
					document.onkeydown = keydown;
					document.body.ontouchmove = touchmove;
				}

				function enable_scroll() {
					window.onmousewheel = document.onmousewheel = document.onkeydown = document.body.ontouchmove = null;
				}

				var docElem = window.document.documentElement,
					scrollVal,
					isRevealed,
					noscroll,
					isAnimating,
					container = document.getElementById( 'project-container' ),
					trigger = container.querySelector( 'button.trigger' );

				function scrollY() {
					return window.pageYOffset || docElem.scrollTop;
				}

				function scrollPage() {
					scrollVal = scrollY();

					if( noscroll && !ie ) {
						if( scrollVal < 0 ) return false;
						// keep it that way
						window.scrollTo( 0, 0 );
					}

					if( classie.has( container, 'notrans' ) ) {
						classie.remove( container, 'notrans' );
						return false;
					}

					if( isAnimating ) {
						return false;
					}

					if( scrollVal <= 0 && isRevealed ) {
						toggle(0);
					}
					else if( scrollVal > 0 && !isRevealed ){
						toggle(1);
					}
				}

				function toggle( reveal ) {
					isAnimating = true;

					if( reveal ) {
						classie.add( container, 'modify' );
					}
					else {
						noscroll = true;
						disable_scroll();
						classie.remove( container, 'modify' );
					}

					// simulating the end of the transition:
					setTimeout( function() {
						isRevealed = !isRevealed;
						isAnimating = false;
						if( reveal ) {
							noscroll = false;
							enable_scroll();
						}
					}, 600 );
				}

				// refreshing the page...
				var pageScroll = scrollY();
				noscroll = pageScroll === 0;

				disable_scroll();

				if( pageScroll ) {
					isRevealed = true;
					classie.add( container, 'notrans' );
					classie.add( container, 'modify' );
				}

				window.addEventListener( 'scroll', scrollPage );
				trigger.addEventListener( 'click', function() { toggle( 'reveal' ); } );
			})();
		</script>
  </body>
</html>
